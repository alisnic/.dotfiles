#!/usr/bin/env ruby
require 'find'
require 'similar_text'

source      = ARGF.argv.first
source_name = File.basename(source).split(".").first
candidates  = []
spec_dir    = File.join(Dir.pwd, "spec")

Find.find(spec_dir) do |path|
  name = File.basename(path)
  if name == source_name + "_spec.rb"
    candidates.push(path)
  end
end

candidates.sort! do |path|
  source.similar(path)
end

STDOUT.puts candidates.first
